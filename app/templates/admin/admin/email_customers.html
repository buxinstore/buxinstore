{% extends "admin/admin/base.html" %}

{% block title %}Email Customers{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-8 px-4">
	<h1 class="text-2xl font-semibold mb-6">Email Customers</h1>

	{% if error %}
	<div class="mb-4 p-3 rounded bg-red-50 text-red-800 border border-red-200">{{ error }}</div>
	{% endif %}
	{% if success %}
	<div class="mb-4 p-3 rounded bg-green-50 text-green-800 border border-green-200">{{ success }}</div>
	{% endif %}

	<form method="post" class="space-y-4">
		<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
		<div>
			<label class="block text-sm font-medium text-gray-700">Subject</label>
			<input name="subject" type="text" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="Enter email subject">
		</div>
		<div>
			<label class="block text-sm font-medium text-gray-700">Message</label>
			<textarea name="body" rows="8" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="Write your message to customers"></textarea>
		</div>
		<div class="flex items-center gap-3 p-3 border rounded">
			<input id="test_only" name="test_only" type="checkbox" class="h-4 w-4">
			<label for="test_only" class="text-sm">Send test only</label>
			<input name="test_email" type="email" class="ml-3 flex-1 border-gray-300 rounded-md shadow-sm" placeholder="test@example.com">
		</div>
		<div class="flex items-center gap-3">
			<button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Send</button>
			{% if sent_count is defined %}
				<span class="text-sm text-gray-600">Sent: {{ sent_count }}</span>
			{% endif %}
		</div>
	</form>
	<p class="mt-4 text-xs text-gray-500">Note: Emails are sent individually to non-admin users to protect privacy.</p>
</div>
{% endblock %}

