{% for product in products.items %}
<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 bulk-edit-row" data-product-id="{{ product.id }}">
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex items-center">
            <div class="flex-shrink-0 h-10 w-10 relative">
                <img class="product-thumbnail h-10 w-10 rounded-md object-cover" 
                     src="{{ product.image|product_image_url if product.image else '/static/img/placeholder.png' }}" 
                     alt="{{ product.name }}"
                     data-product-id="{{ product.id }}">
            </div>
            <div class="ml-4 flex-1 min-w-0">
                <input type="text" 
                       class="bulk-edit-field product-name-input w-full px-2 py-1 text-sm font-medium text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700" 
                       value="{{ product.name }}"
                       data-field="name"
                       data-original="{{ product.name }}"
                       data-product-id="{{ product.id }}">
                <div class="text-sm text-gray-500 dark:text-gray-400 mt-1">SKU: {{ product.sku or 'N/A' }}</div>
                <input type="url" 
                       placeholder="Image URL"
                       class="bulk-edit-field image-url-input w-full mt-1 px-2 py-1 text-xs text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700" 
                       value="{{ product.image if product.image else '' }}"
                       data-field="image"
                       data-original="{{ product.image if product.image else '' }}"
                       data-product-id="{{ product.id }}">
            </div>
        </div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <select class="bulk-edit-field category-select w-full px-2 py-1 text-sm text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700"
                data-field="category_id"
                data-original="{{ product.category_id }}"
                data-product-id="{{ product.id }}">
            {% for category in categories %}
            <option value="{{ category.id }}" {% if product.category_id == category.id %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400 mr-1">D</span>
            <input type="number" 
                   step="0.01"
                   min="0"
                   class="bulk-edit-field price-input w-24 px-2 py-1 text-sm text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700" 
                   value="{{ "%.2f"|format(product.price) }}"
                   data-field="price"
                   data-original="{{ product.price }}"
                   data-product-id="{{ product.id }}">
        </div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <input type="number" 
               min="0"
               class="bulk-edit-field stock-input w-20 px-2 py-1 text-sm text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700" 
               value="{{ product.stock }}"
               data-field="stock"
               data-original="{{ product.stock }}"
               data-product-id="{{ product.id }}">
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        {% if product.stock > 5 %}
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                In Stock
            </span>
        {% elif product.stock > 0 %}
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100">
                Low Stock
            </span>
        {% else %}
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-800">
                Out of Stock
            </span>
        {% endif %}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-center">
        <div class="flex flex-col items-center gap-1">
            <label class="gambia-toggle-switch" title="Toggle Gambia availability">
                <input type="checkbox" 
                       class="bulk-edit-field toggle-gambia" 
                       data-product-id="{{ product.id }}"
                       data-field="available_in_gambia"
                       data-original="{{ 'true' if product.available_in_gambia else 'false' }}"
                       {% if product.available_in_gambia %}checked{% endif %}>
                <span class="slider round"></span>
            </label>
            <input type="number" 
                   step="0.01"
                   min="0"
                   placeholder="Shipping"
                   class="bulk-edit-field gambia-shipping-input w-16 px-1 py-0.5 text-xs text-gray-900 dark:text-white bg-transparent border border-transparent hover:border-gray-300 dark:hover:border-gray-600 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-700" 
                   value="{{ product.shipping_price if product.shipping_price else '' }}"
                   data-field="shipping_price"
                   data-original="{{ product.shipping_price if product.shipping_price else '' }}"
                   data-product-id="{{ product.id }}">
        </div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
        <a href="{{ url_for('admin_edit_product', product_id=product.id) }}" class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4">
            <i class="fas fa-edit"></i>
        </a>
        <button onclick="confirmDelete({{ product.id }}, '{{ product.name }}')" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
            <i class="fas fa-trash"></i>
        </button>
    </td>
</tr>
{% else %}
<tr>
    <td colspan="7" class="px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400">
        No products found
    </td>
</tr>
{% endfor %}
