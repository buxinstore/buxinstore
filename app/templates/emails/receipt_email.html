<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Your Receipt</title>
	<style>
		body { margin:0; padding:0; background:#f6f7f9; font-family: Arial, Helvetica, sans-serif; color:#111827; }
		.wrapper { width:100%; background:#f6f7f9; padding:24px 0; }
		.container { width: 100%; max-width: 640px; margin: 0 auto; background:#ffffff; border:1px solid #e5e7eb; border-radius:8px; overflow:hidden; }
		.header { padding:16px 20px; border-bottom:1px solid #e5e7eb; }
		.h1 { margin:0; font-size:18px; color:#111827; }
		.section { padding:16px 20px; }
		.label { color:#6b7280; font-size:12px; }
		.value { font-weight:bold; font-size:14px; color:#111827; }
		.table { width:100%; border-collapse: collapse; margin-top:8px; }
		.table th, .table td { padding:8px 10px; border-bottom:1px solid #e5e7eb; text-align:left; font-size:14px; }
		.table th { background:#f9fafb; color:#374151; font-size:12px; }
		.footer { background:#f9fafb; padding:16px 20px; color:#6b7280; font-size:12px; text-align:center; }
		.btn { display:inline-block; padding:10px 14px; background:#111827; color:#fff !important; text-decoration:none; border-radius:6px; font-weight:bold; }
	</style>
	<meta name="color-scheme" content="light">
	<meta name="supported-color-schemes" content="light">
</head>
<body>
	<div class="wrapper">
		<div class="container">
			<div class="header">
				<p class="h1">Thank you for your purchase, {{ customer_name }}!</p>
			</div>
			<div class="section">
				<p style="margin:0 0 12px 0;">Weâ€™ve received your payment. Below is your receipt.</p>
				<table role="presentation" style="width:100%; margin-top:8px;">
					<tr>
						<td class="label" style="width:40%;">Order</td>
						<td class="value">#{{ order.id }}</td>
					</tr>
					<tr>
						<td class="label">Reference</td>
						<td class="value">{{ payment.reference }}</td>
					</tr>
					<tr>
						<td class="label">Transaction ID</td>
						<td class="value">{{ payment.transaction_id }}</td>
					</tr>
					<tr>
						<td class="label">Amount</td>
						<td class="value">GMD {{ '%.2f' % payment.amount }}</td>
					</tr>
					<tr>
						<td class="label">Status</td>
						<td class="value">{{ (payment.status or 'completed')|capitalize }}</td>
					</tr>
					<tr>
						<td class="label">Paid At</td>
						<td class="value">{{ payment.paid_at or '-' }}</td>
					</tr>
				</table>
			</div>
			{% if order_items %}
			<div class="section">
				<p class="label" style="margin:0 0 6px 0;">Items</p>
				<table class="table">
					<thead>
						<tr>
							<th>Product</th>
							<th>Qty</th>
							<th>Price (GMD)</th>
							<th>Total (GMD)</th>
						</tr>
					</thead>
					<tbody>
						{% for item in order_items %}
						<tr>
							<td>{{ item.product.name if item.product else ('Product #' ~ item.product_id) }}</td>
							<td>{{ item.quantity }}</td>
							<td>{{ '%.2f' % item.price }}</td>
							<td>{{ '%.2f' % (item.price * item.quantity) }}</td>
						</tr>
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<th colspan="3" style="text-align:right;">Order Total</th>
							<th>{{ '%.2f' % order.total }}</th>
						</tr>
					</tfoot>
				</table>
			</div>
			{% endif %}
			<div class="section" style="text-align:center;">
				<a class="btn" href="{{ url_for('orders', _external=True) }}">View your orders</a>
			</div>
			<div class="footer">
				<p style="margin:0;">We appreciate your business and hope to serve you again soon.</p>
				<p style="margin:8px 0 0 0;">If you have any questions, just reply to this email.</p>
			</div>
		</div>
	</div>
</body>
</html>

