{% extends "base.html" %}

{% block title %}Home - Buxin Electronics Store{% endblock %}

{% block content %}
  <!-- Hero Section -->
  <div class="mb-8 rounded-2xl p-6 backdrop-blur-sm border border-[color:var(--app-border)] bg-[color:var(--app-card)] transition-colors duration-300">
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-2xl font-bold mb-2 text-[color:var(--app-text)]">{{ site_settings.hero_title or 'Build the Future' }}</h2>
        <p class="text-[color:var(--app-muted)] dark:text-slate-400">{{ site_settings.hero_subtitle or 'Premium electronics and robotics components' }}</p>
        <div class="mt-4">
          <a href="{{ site_settings.hero_button_link or '#featured' }}" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg font-medium hover:shadow-lg hover:shadow-cyan-500/30 transition-all">
            {{ site_settings.hero_button_text or 'Shop Now' }}
            <i data-lucide="arrow-right" class="ml-2 w-4 h-4"></i>
          </a>
        </div>
      </div>
      {% if hero_image_url %}
      <div class="w-24 h-24 rounded-2xl overflow-hidden border border-cyan-200 dark:border-cyan-600 shadow-lg">
        <img src="{{ hero_image_url }}" alt="Hero image" class="w-full h-full object-cover">
      </div>
      {% else %}
      <div class="w-24 h-24 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-2xl flex items-center justify-center animate-pulse">
        <i data-lucide="cpu" class="w-10 h-10 text-white"></i>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Shop by Category -->
  <div class="mb-8">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-bold">Shop by Category</h3>
      <a href="{{ url_for('all_products') }}" class="text-cyan-400 text-sm font-medium flex items-center gap-1 hover:gap-2 transition-all">
        View All
        <i data-lucide="chevron-right" class="w-4 h-4"></i>
      </a>
    </div>

    <div id="categories-container" class="flex gap-3 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide">
      {% for cat in categories_with_counts %}
      <a href="{{ url_for('category', category_id=cat.id) }}" class="flex-shrink-0 bg-[color:var(--app-card)] dark:bg-slate-900/60 hover:bg-[color:var(--app-surface-hover)] dark:hover:bg-slate-800/60 border border-[color:var(--app-border)] dark:border-slate-700/60 hover:border-cyan-500 rounded-xl p-4 transition-all hover:scale-105 min-w-[140px] text-[color:var(--app-text)]">
        <div class="w-16 h-16 rounded-lg overflow-hidden mb-3 mx-auto border border-[color:var(--app-border)] dark:border-slate-700">
          {% if cat.image %}
          <img src="{{ url_for('static', filename=cat.image) }}" alt="{{ cat.name }}" class="w-full h-full object-cover">
          {% else %}
          <div class="w-full h-full bg-gradient-to-br {{ cat.gradient }} flex items-center justify-center">
            <i data-lucide="{{ cat.icon }}" class="w-6 h-6 text-white"></i>
          </div>
          {% endif %}
        </div>
        <h4 class="font-semibold text-sm mb-1 text-center text-[color:var(--app-text)]">{{ cat.name }}</h4>
        <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400 text-center">
          {{ cat.count }} {{ 'item' if cat.count == 1 else 'items' }}
        </p>
      </a>
      {% endfor %}
    </div>
  </div>

  <!-- Featured Products -->
  <div class="mb-8">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-bold">Featured Products</h3>
      <a href="{{ url_for('all_products') }}" class="text-cyan-400 text-sm font-medium flex items-center gap-1 hover:gap-2 transition-all">
        See All
        <i data-lucide="chevron-right" class="w-4 h-4"></i>
      </a>
    </div>

    <div id="products-container" class="grid grid-cols-2 gap-3">
      {% for product in featured_products %}
      <div class="product-card cursor-pointer bg-[color:var(--app-card)] dark:bg-slate-900/60 border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-xl overflow-hidden hover:border-cyan-500/50 transition-all hover:scale-[1.02] hover:shadow-lg hover:shadow-cyan-500/10 text-[color:var(--app-text)]"
           data-wishlist-card
           data-product-id="{{ product.id }}">
        <div class="relative">
          <a href="{{ url_for('product', product_id=product.id) }}" class="block h-40 overflow-hidden">
            {% if product.image %}
              <img src="{{ product.image|product_image_url }}" alt="{{ product.name }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-200" onerror="this.src='https://placehold.co/400x400/34d399/ffffff?text=No+Image'; this.onerror=null;">
            {% else %}
              <div class="w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 flex items-center justify-center">
                <i data-lucide="image" class="w-10 h-10 text-[color:var(--app-muted)] dark:text-slate-400"></i>
              </div>
            {% endif %}
          </a>
          
          <button type="button"
                  class="wishlist-button absolute top-2 right-2 p-2 bg-[color:var(--app-card)] dark:bg-slate-900/80 backdrop-blur-md rounded-full shadow-md hover:bg-[color:var(--app-surface-hover)] dark:hover:bg-slate-800 transition-all group"
                  data-product-id="{{ product.id }}"
                  aria-label="Toggle wishlist">
                        <i class="heart-icon fas fa-heart text-red-500 absolute inset-0 m-auto hidden"></i>
                        <i class="heart-outline-icon fas fa-heart text-[color:var(--app-muted)] dark:text-slate-500"></i>
                    </button>
          
          {% if product.available_in_gambia %}
          <div class="absolute top-2 left-2 w-8 h-8 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-full shadow-lg flex items-center justify-center z-10" title="Available in Gambia">
            <span class="text-xl">ðŸ‡¬ðŸ‡²</span>
          </div>
          {% endif %}
          
          {% if product.stock == 0 %}
            <div class="absolute {% if product.available_in_gambia %}top-12{% else %}top-2{% endif %} left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-lg font-medium z-10">
              Out of Stock
            </div>
          {% endif %}
        </div>
        
        <div class="p-3">
          <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400 mb-1">{{ product.category.name if product.category else 'Electronics' }}</p>
          <h4 class="font-semibold text-sm mb-2 line-clamp-2 text-[color:var(--app-text)]">{{ product.name }}</h4>
          
          <div class="mt-1 mb-2">
            <span class="text-sm font-semibold text-green-600 dark:text-green-400">
              D{{ product.price }}
            </span>
          </div>
          
          <div class="flex items-center justify-end">
            <form class="add-to-cart-form inline-block" action="{{ url_for('add_to_cart', product_id=product.id) }}" method="POST" data-wishlist-ignore>
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <input type="hidden" name="quantity" value="1">
              <button type="submit" class="add-to-cart-btn bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:shadow-lg hover:shadow-cyan-500/30 transition-all {% if product.stock == 0 %}opacity-50 cursor-not-allowed{% endif %}"
                      {% if product.stock == 0 %}disabled{% endif %}>
                <span class="add-to-cart-text">
                  {% if product.stock > 0 %}
                    Add to Cart
                  {% else %}
                    Out of Stock
                  {% endif %}
                </span>
                <span class="add-to-cart-loader hidden ml-1">
                  <i class="fas fa-spinner fa-spin"></i>
                </span>
              </button>
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Promo Banner
  <div class="bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-500/10 dark:to-pink-500/10 border border-purple-300 dark:border-purple-500/20 rounded-2xl p-6 mb-8">
    <h3 class="text-lg font-bold mb-2">ðŸŽ‰ Special Offer</h3>
    <p class="text-[color:var(--app-muted)] dark:text-slate-400 text-sm mb-3">
      Get 10% off on all orders over D1000 this week! Use code <span class="font-mono bg-purple-200 dark:bg-purple-900/30 px-2 py-0.5 rounded">BUXIN10</span>
    </p>
    <a href="#featured" class="inline-block bg-gradient-to-r from-purple-500 to-pink-500 text-white px-5 py-2.5 rounded-xl font-medium text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all">
      Shop Now
    </a>
  </div>
 -->

  <!-- Features Section -->
  <div class="grid grid-cols-2 gap-4 mb-8">
    <div class="bg-[color:var(--app-card)] dark:bg-slate-900/60 border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-xl p-4 text-center transition-colors duration-300 text-[color:var(--app-text)]">
      <div class="w-10 h-10 bg-cyan-100 dark:bg-cyan-900/40 rounded-full flex items-center justify-center mx-auto mb-2">
        <i data-lucide="truck" class="w-5 h-5 text-cyan-500"></i>
      </div>
      <h4 class="font-medium text-sm mb-1 text-[color:var(--app-text)]">Free Delivery in The Gambia</h4>
      <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400">On orders over D10,000</p>
    </div>
    
    <div class="bg-[color:var(--app-card)] dark:bg-slate-900/60 border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-xl p-4 text-center transition-colors duration-300 text-[color:var(--app-text)]">
      <div class="w-10 h-10 bg-green-100 dark:bg-green-900/40 rounded-full flex items-center justify-center mx-auto mb-2">
        <i data-lucide="shield-check" class="w-5 h-5 text-green-500"></i>
      </div>
      <h4 class="font-medium text-sm mb-1 text-[color:var(--app-text)]">Secure Payment</h4>
      <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400">100% secure payment</p>
    </div>
    
    <div class="bg-[color:var(--app-card)] dark:bg-slate-900/60 border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-xl p-4 text-center transition-colors duration-300 text-[color:var(--app-text)]">
      <div class="w-10 h-10 bg-amber-100 dark:bg-amber-900/40 rounded-full flex items-center justify-center mx-auto mb-2">
        <i data-lucide="refresh-cw" class="w-5 h-5 text-amber-500"></i>
      </div>
      <h4 class="font-medium text-sm mb-1 text-[color:var(--app-text)]">Easy Returns</h4>
      <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400">30-day return policy</p>
    </div>
    
    <div class="bg-[color:var(--app-card)] dark:bg-slate-900/60 border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-xl p-4 text-center transition-colors duration-300 text-[color:var(--app-text)]">
      <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center mx-auto mb-2">
        <i data-lucide="headphones" class="w-5 h-5 text-blue-500"></i>
      </div>
      <h4 class="font-medium text-sm mb-1 text-[color:var(--app-text)]">24/7 Support</h4>
      <p class="text-xs text-[color:var(--app-muted)] dark:text-slate-400">Dedicated support</p>
    </div>
  </div>

  <!-- Newsletter
  <div class="border border-[color:var(--app-border)] dark:border-slate-700/60 rounded-2xl p-6 text-center transition-colors duration-300 bg-[color:var(--app-card)] text-[color:var(--app-text)]">
    <h3 class="text-lg font-bold mb-2 text-[color:var(--app-text)]">Stay Updated</h3>
    <p class="text-[color:var(--app-muted)] dark:text-slate-400 text-sm mb-4 max-w-md mx-auto">
      Subscribe to our newsletter for the latest products, offers and tech news.
    </p>
    <form class="flex flex-col sm:flex-row gap-2 max-w-md mx-auto">
      <input type="email" placeholder="Enter your email" class="flex-1 bg-[color:var(--app-input)] dark:bg-slate-800/50 border border-[color:var(--app-border)] dark:border-slate-700/50 rounded-xl px-4 py-3 text-sm text-[color:var(--app-text)] placeholder:text-[color:var(--app-muted)] focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500 transition-all">
      <button type="submit" class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-6 py-3 rounded-xl font-medium text-sm hover:shadow-lg hover:shadow-cyan-500/30 transition-all whitespace-nowrap">
        Subscribe
      </button>
    </form>
  </div>
  -->
{% endblock %}

{% block scripts %}{% endblock %}
